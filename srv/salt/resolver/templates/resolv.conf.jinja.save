{% set nameservers  = pillar['resolver']['nameservers'] | default(None) -%}
{% set searchpaths  = pillar['resolver']['searchpaths'] | default(None) -%}
{% set options      = pillar['resolver']['options'] | default(None) -%}
{% set domain       = pillar['domain'] | default(None) -%}

# Dynamic resolv.conf(5) file for glibc resolver(3) generated by salt-minion(1)
# DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
{% if nameservers %}
{% for key in nameservers %}nameserver {{ key }}{% endfor %}
{% endif %}
{% if searchpaths %}
search {% for key in searchpaths %} {{ key }} {% endfor %}
{% endif %}
{% if domain %}
domain {{ domain }}
{% endif %}
{% if options %}
option {% for key in options %}{{ key }} {% endfor %}
{% endif %}
